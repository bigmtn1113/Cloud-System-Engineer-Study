## AWS EC2(Elastic Compute Cloud)
- 확장 가능 컴퓨팅 용량 제공

- 하드웨어에 선 투자할 필요가 없어 더 빠르게 앱 개발 및 배포 가능

- 원하는 만큼 가상 서버를 구축하고 보안 및 네트워크 구성과 스토리지 관리 가능

- 요구 사항이나 갑작스런 트래픽 증가 등 변동 사항에 따라 신속하게 규모를 확장하거나 축소할 수 있어 서버 트래픽 예측 필요성 감소

### Instance
가상 컴퓨팅 환경

#### Instance Type
인스턴스를 위한 CPU, Memory, Storage, Networking 용량의 여러가지 구성 제공

- **범용(General Purpose):** 모든 리소스의 균형을 알맞게 유지하여 사용 가능

- **컴퓨팅 최적화(Compute Optimized):** 고성능 프로세서의 이점을 활용(일괄처리, 머신러닝, ...)

- **메모리 최적화(Memory Optimized):** 메모리에서 대규모 데이터(관계형 및 NoSQL 데이터, 키-값 유형 데이터, 비정형 데이터)를 처리

- **가속화된 컴퓨팅(Accelerated Computing):** 그래픽 처리와 같은 하드웨어 기반 컴퓨팅 리소스에 비중

- **스토리지 최적화(Storage Optimized):** 로컬 스토리지의 초대형 데이터 세트에 대한 순차적 읽기 및 쓰기 엑세스가 많이 필요한 작업(대량 병렬 처리, 데이터 웨어하우스, 하둡 분산, 로그 처리, ...)에 적합

#### Tag
사용자가 생성하여 EC2 리소스에 할당할 수 있는 메타데이터

#### Key Pair
인스턴스 로그인 정보 보호
AWS는 public key를 저장하고 사용자는 개인 키를 안전한 장소에 보관

#### Instance Store Volume
임시 데이터를 저장하는 스토리지 볼륨으로 인스턴스 중단, 최대 절전 모드로 전환 또는 종료 시 삭제

#### ※ VPC(Virtual Private Cloud)
논리적으로는 격리 상태지만 원할 때마다 고객의 네트워크와 간편히 연결할 수 있도록 해주는 가상 네트워크

<br/>

### Image
#### AMI(Amazon Machine Image)
EC2 인스턴스의 기반이 되는 이미지  
서버에 필요한 OS와 여러 SW들이 적절히 구성된 상태로 제공되는 템플릿  
인스턴스를 쉽게 생성 가능

<br/>

### EBS(Elastic Block Store)
대규모로 처리량과 트랜잭션 집약적인 워크로드 모두를 지원하기 위해 EC2에서 사용하도록 설계된 사용하기 쉬운 고성능 블록 스토리지 서비스

- EBS 볼륨을 사용해 영구 스토리지 볼륨에 데이터 저장

- 관계형 및 비관계형 데이터베이스, 엔터프라이즈 애플리케이션, 컨테이너화된 애플리케이션, 빅 데이터 분석 엔진, 파일 시스템 및 미디어 워크플로와 같은 다양한 워크로드가 Amazon EBS에 사용

- 미션 크리티컬 시스템을 위해 설계된 EBS 볼륨은 AZ(가용 영역) 내에서 복제되며, 페타바이트의 데이터로 쉽게 확장 가능

- 데이터의 지리적 보호와 비즈니스 연속성을 보장하면서, 자동화된 수명 주기 정책 기반으로 EBS 스냅샷을 사용하여 S3에서 볼륨을 백업 가능

#### EBS Type
SSD - gp2(General Purpose), io1(Provisioned IOPS)  
HDD - st1(Throughput Optimized), sc1(Cold)

#### 특징
- EC2에 설치된 OS에서 일반적인 HDD/SSD로 인식

- AZ의 여러 서버에 자동으로 복제되며 구송요소 장애로부터 보호

- Provisioning한 부분에 대해서만 비용 지불

- 원하는 크기와 성능(IOPS)으로 설정 가능

- EBS 볼륨 사이즈와 스토리지 타입은 실행 중에도 변경 가능

- EBS 마그네틱 볼륨은 1GB ~ 1TB 크기로 생성 가능

- gp2와 io1 볼륨은 16TB 크기로 생성 가능

- EC2 인스턴스에 독립적으로 지속(인스턴스가 stop, start, reboot 되어도 지속)

- EC2 인스턴스 종료 시, Root EBS는 디폴트로 삭제되지만 DeleteOnTermination flag로 수정 가능

- EC2 인스턴스 종료 시 모든 Attached EBS 볼륨들은 지속

#### EBS 성능
새로 만들어진 EBS 볼륨은 사용 가능한 순간에 최대 성능을 내고, initialization이 불필요(pre-warming)

- RAID 0
  - 입출력 성능이 안정성보다 더 중요할 때 사용. 단일 Amazon EBS 볼륨에서 프로비저닝할 때보다 파일 시스템의 성능이 더 향상

  - 장점
    - 입출력이 stripe 내의 볼륨들에 분산

    - 볼륨을 하나 추가하면 그 즉시 처리량의 추가와 같다

  - 단점
    - 가장 performance가 낮은 볼륨을 기준으로 stripe의 performance 제한

    - 한 볼륨의 손실은 데이터 손실을 의미

- RAID 1
  - 안정성이 입출력 성능보다 중요할 때 사용

  - 장점
    - 데이터 지속성 측면에서 안전

  - 단점
    - EBS와 함께 사용하지 않는 것을 권장. 데이터를 동시에 여러 볼륨에 쓰기 때문에 비 RAID 구성에 비해 EC2와 EBS 사이에 더 큰 대역폭이 필요하며, RAID 1은 쓰기 성능 향상 효과를 제공하지 않음

<br/>

### Network & Security
#### Security Group
보안을 위해 IP와 포트 번호를 이용해 정의해두는 서버 접속 규칙  
인스턴스에 연결할 수 있는 프로토콜, 포트, 소스 IP 범위를 지정하는 방화벽 기능

#### EIP(Elastic IP)
동적 클라우드 컴퓨팅을 위한 고정 IPv4 주소 

<br/>

### Auto Scaling
#### Auto Scaling Group
Auto Scaling을 사용하면 애플리케이션에 포함된 AWS 리소스의 자동 조정을 단 몇 분만에 구성 가능  
Auto Scaling을 사용하면 확장 조정 계획을 통해 리소스에 대한 확장 조정 구성 및 관리 가능  
개별 리소스나 전체 애플리케이션에 대해 자동 조정 구성 가능

조정 계획은 동적 조정과 예측 조정을 사용하여 애플리케이션의 리소스를 자동 조정  
이를 통해 애플리케이션의 로드를 처리하고 더 이상 필요하지 않을 때, 이를 제거하는데 필요한 컴퓨팅 성능 추가 가능  
조정 계획을 사용하면 리소스 사용률을 최적화하는 방법을 정의하는 조정 전략 선택 가능  
가용성, 비용 또는 둘의 균형에 맞게 최적화 가능  
사용자 지정 조정 전략 생성 가능

- 자동 조정
  - **Amazon EC2 Auto Scaling group:** Auto Scaling Group에서 EC2 인스턴스를 시작하거나 종료

  - **Amazon EC2 Spot Fleet Request:** Spot Fleet Request에서 인스턴스를 시작 또는 종료하거나, 가격 또는 용량 때문에 중단된 인스턴스를 자동 대체

  - **Amazon ECS:** 로드 변동에 따라 ECS 서비스 카운트를 상향 또는 하향 조정

  - **Amazon DynamoDB:** DynamoDB 테이블 또는 글로벌 보조 인덱스가 할당된 읽기 및 쓰기 용량을 늘리거나 줄여 병목 현상 없이 트래픽 증가를 처리

  - **Amazon Aurora:** 활성 연결 또는 워크로드의 변경을 처리하기 위해 Aurora DB 클러스터에 프로비저닝된 Aurora 읽기 전용 복제본 수를 동적으로 조정

- 예측 조정  
  동적 조정은 애플리케이션의 확장 가능 리소스에 대한 대상 추적 조정 청책을 생성  
  이를 통해 조정 계획은 필요에 따라 각 리소스에 대한 용량을 추가하고 제거하여 리소스 활용률을 지정한 목표 값으로 유지 가능  
  
  - 로드 예측  
    AWS Auto Scaling은 지정한 로드 지표에 대해 최대 14일 동안의 기록을 분석  
    향후 2일 동안의 수요 예측  
    이 데이터는 1시간 간격으로 제공되며 매일 업데이트

  - 예약 조정 작업  
    AWS Auto Scaling은 로드 예측을 반영하기 위해 리소스 용량을 사전에 추가하고 제거하는 조정 작업을 예약  
    예약된 시간에 AWS Auto Scaling은 리소스의 최소 용량을 예약 조정 작업에서 지정한 값으로 업데이트  
    조정 전략에서 지정한 목표 값으로 리소스 사용률을 유지  
    예측보다 더 많은 용량이 애플리케이션에 필요하면 동적 조정에서 용량 추가

  - 최대 용량 동작  
    각 리소스에는 예약된 조정 작업에서 지정하는 값에 대한 최소 및 최대 용량 제한 존재  
    예측 용량이 최대 용량보다 높으면 애플리케이션이 최대 용량을 초과하는 리소스를 추가할 수 있는지 여부를 제어 가능

- 수명주기  
  Auto Scaling Group이 인스턴스를 시작하고 서비스에 들어갈 때 시작  
  인스턴스를 종료하거나 Auto Scaling Group이 인스턴스를 서비스에서 제외시키고 이를 종료할 때 끝남

※ **Spot Fleet**  
사용자가 지정한 기준에 따라 시작되는 스팟 인스턴스의 집합이며 선택적으로 온디맨드 인스턴스 집합  
기본적으로 스팟 집합은 플릿에서 스팟 인스턴스가 종료된 후 교체 인스턴스를 시작하여 목표 용량을 유지하도록 설정되어 있다.

※ **Amazon ECS(Elastic Container Service)**  
컨테이너화된 애플리케이션의 손쉬운 배포, 관리 및 조정에 도움이 되는 완전관리형 컨테이너 오케스트레이션 서비스

<br/>

### Load Balancing
네트워크 트래픽을 하나 이상의 서버 혹은 장비로 분산하기 위해 사용하는 기술

#### Algorithm
- Roud Robin
  - Session 연결을 순차적으로 맺어줌

- Hash
  - Client가 특정 Server로 연결된 이후 동일 서버로만 연결

- Least Connection
  - Session 수를 고려하여 가장 작은 Session을 보유한 서버로 연결

- Response Time
  - 서버간의 Resource와 Connectino의 차이가 있는 환경에서 사용되는, 응답시간이 가장 빠른 서버로 Session을 연결

#### Network Load Balancer(NLB)
- 온프레이스 환경에서의 L4 스위치 역할

- TCP와 UDP 그리고 RTP 등의 헤더를 사용하여 FTP, HTTP, TFTP, SMTP 등의 프로토콜 중 어떤 것을 우선시해서 스위칭할 지 판단 가능

#### Application Load Balancer(ALB)
- 온프레미스 환경에서의 L7 스위치 역할

- 이메일의 문자열로 내용을 파악한다거나 HTTP의 URL, FTP의 파일명, 쿠키 정보 등을 분석해서 정교한 LB 가능
